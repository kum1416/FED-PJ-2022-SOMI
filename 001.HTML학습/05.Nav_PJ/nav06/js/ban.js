// ë„¤ë¹„ìœ í˜• 6 : ë°°ë„ˆì…‹íŒ… JS - ban.js //////
window.addEventListener("DOMContentLoaded",setBan);


/***************************************************** 
    [ ìŠ¬ë¼ì´ë“œ ì´ë™ ê¸°ëŠ¥ì •ì˜ ]
    1. ì´ë²¤íŠ¸ ì¢…ë¥˜: click
    2. ì´ë²¤íŠ¸ ëŒ€ìƒ: ì´ë™ë²„íŠ¼(.abtn)
    3. ë³€ê²½ ëŒ€ìƒ: ìŠ¬ë¼ì´ë“œ ë°•ìŠ¤(.slide)
    4. ê¸°ëŠ¥ ì„¤ê³„:
        -> left ì´ë™ì˜ ê¸°ì¤€ê°’ì´ -240% ì¸ê²ƒì´ í¬ì¸íŠ¸!
        (ì´ìœ : 2ì¥ì˜ ìŠ¬ë¼ì´ë“œê°€ ì•ì— ë‚˜ê°€ìˆìŒ. ì˜ë¼ë‚´ëŠ” ê²ƒì´
            ìˆ¨ê²¨ì ¸ì•¼í•˜ë¯€ë¡œ ì…‹íŒ…í•œê²ƒì„!)

        (1) ì˜¤ë¥¸ìª½ ë²„íŠ¼ í´ë¦­ì‹œ

            â€» ë³€ê²½ëœë¶€ë¶„!!!
            {   íŠ¸ëœì§€ì…˜ ì¤‘ì•™ ì»¤ì§€ê¸°ë¥¼ ì ìš©í•œ ê²½ìš°ì´ë¯€ë¡œ
                ì™¼ìª½ë²„íŠ¼ê³¼ ê°™ì´ ì˜ë¼ë‚´ê¸°ë¥¼ ë¨¼ì €í•˜ì—¬
                ìŠ¬ë¼ì´ë“œ ì£¼ì¸ê³µ ìˆœì„œë¥¼ ì¼ì¹˜ ì‹œí‚¨ë‹¤!!!! }

            -> ìŠ¬ë¼ì´ë“œ ì´ë™ì „!!! 
            ë°”ê¹¥ì— ë‚˜ê°€ìˆëŠ” ì²«ë²ˆì§¸ ìŠ¬ë¼ì´ë“œ
            lië¥¼ ì˜ë¼ì„œ ë§¨ë’¤ë¡œ ë³´ë‚¸ë‹¤!
            ë™ì‹œì— leftê°’ì„ -110%ìœ¼ë¡œ ë³€ê²½í•œë‹¤!
        
            ë‹¤ìŒ ìŠ¬ë¼ì´ë“œê°€
            ë‚˜íƒ€ë‚˜ë„ë¡ ìŠ¬ë¼ì´ë“œ ë°•ìŠ¤ì˜ leftê°’ì„
            -240%ë¡œ ë³€ê²½ì‹œí‚¨ë‹¤.
            

        (2) ì™¼ìª½ë²„íŠ¼ í´ë¦­ì‹œ ì´ì „ ìŠ¬ë¼ì´ë“œê°€
            ë‚˜íƒ€ë‚˜ë„ë¡ í•˜ê¸°ìœ„í•´ ìš°ì„  ë§¨ë’¤ lië¥¼
            ë§¨ì•ìœ¼ë¡œ ì´ë™í•˜ê³  ë™ì‹œì— leftê°’ì„
            -360%ë¡œ ë³€ê²½í•œë‹¤.
            ê·¸ í›„ leftê°’ì„ -240%ìœ¼ë¡œ ì• ë‹ˆë©”ì´ì…˜í•˜ì—¬
            ìŠ¬ë¼ì´ë“œê°€ ì™¼ìª½ì—ì„œ ë“¤ì–´ì˜¨ë‹¤.

        (3) ê³µí†µê¸°ëŠ¥: ìŠ¬ë¼ì´ë“œ ìœ„ì¹˜í‘œì‹œ ë¸”ë¦¿
            - ë¸”ë¦¿ ëŒ€ìƒ: .indic li
            - ë³€ê²½ ë‚´ìš©: ìŠ¬ë¼ì´ë“œ ìˆœë²ˆê³¼ ê°™ì€ ìˆœë²ˆì˜
            liì— í´ë˜ìŠ¤ "on"ì£¼ê¸°(ë‚˜ë¨¸ì§„ ë¹¼ê¸°->ì´ˆê¸°í™”!)

*****************************************************/

// ğŸ¥—ë°°ë„ˆì…‹íŒ…í•¨ìˆ˜ //////
function setBan(){
    // 1. í˜¸ì¶œí™•ì¸
    // console.log("ë°°ë„ˆì•¼~!");

    // 2. ëŒ€ìƒì„ ì • : .bancont
    const bancont = document.querySelector(".bancont");
    // console.log(bancont);

    // 3. íƒœê·¸ êµ¬ì„±í•˜ê¸°
    // íƒœê·¸ë³€ìˆ˜
    let hcode = `<ul class="slide">`;
    
    for(let i = 1 ; i<= 13; i++){
        hcode += ` 
            <li>
                <img src="./nav06/img_nav06/ban${i}.png" alt="ë°°ë„ˆì´ë¯¸ì§€">
            </li>
        `;
    } /////// for ë¬¸ ///////
    
    hcode += `</ul>`;
    // console.log(hcode);

    // 4. .bancontì— ì¶œë ¥í•˜ê¸°
    bancont.innerHTML = hcode;

    //________________________________________________

    // [ ìŠ¬ë¼ì´ë“œ ê¸°ë³¸ê¸°ëŠ¥ êµ¬í˜„ ] ////////////////

    // 1. ëŒ€ìƒì„ ì • //////////////////////////
    // 1-1. ì´ë²¤íŠ¸ ëŒ€ìƒ: .abtn
    const abtn = document.querySelectorAll(".abtn");

    // 1-2. ë³€ê²½ ëŒ€ìƒ: .slide
    const slide = document.querySelector(".slide");

    // 1-3. ë¸”ë¦¿ ëŒ€ìƒ: .indic li
    // const indic = document.querySelectorAll(".indic li");
    // console.log(indic);

    // 1-4. ìŠ¬ë¼ì´ë“œ lië¦¬ìŠ¤íŠ¸
    let slist = document.querySelectorAll(".slide>li");

    // [ ì´ˆê¸°í™”1 - ìˆœë²ˆë¶™ì´ê¸° ] ///////////////////
    // ì˜ë¼ë‚´ê¸°ë¡œ liìˆœë²ˆì´ ë’¤ì„ì´ë¯€ë¡œ ë¸”ë¦¿ë³€ê²½ ë§¤ì¹­ì„ ìœ„í•œ
    // ê³ ìœ ìˆœë²ˆì„ ì‚¬ìš©ìì •ì˜ ì†ì„±(data-)ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤!
    slist.forEach((ele, idx) => {
        // data-seq ë¼ëŠ” ì‚¬ìš©ìì •ì˜ ì†ì„± ë„£ê¸°
        ele.setAttribute("data-seq", idx);
    }); ////// forEach /////////////////

    // [ ì´ˆê¸°í™”2 - ë§¨ë’¤ìš”ì†Œ ë§¨ì•ìœ¼ë¡œ ì´ë™ 2ë²ˆí•˜ê¸°! ]
    // ë§¨ë’¤ ë§¨ì•ì´ë™ í•¨ìˆ˜ë§Œë“¤ê¸°
    const chgSeq = () => {
        // í˜„ì¬ ìŠ¬ë¼ì´ë“œ li ìƒˆë¡œì½ê¸°(2ë²ˆë°˜ë³µì‹œ liì˜ ìˆœì„œê°€ ë‹¬ë¼ì§€ê¸°ë•Œë¬¸)
        slist = document.querySelectorAll(".slide>li");
        // ë§¨ë’¤ ë§¨ì•ì´ë™í•˜ê¸° -> ë³€ê²½ëŒ€ìƒ: .slide -> slideë³€ìˆ˜
        slide.insertBefore(slist[slist.length - 1], slist[0]);
        // slide.insertBefore(ë„£ì„ë†ˆ,ë„£ì„ë†ˆì „ë†ˆ)
        // slide.insertBefore(ë§ˆì§€ë§‰ìš”ì†Œ,ì²«ìš”ì†Œ)
        // slide.insertBefore(slist[ê°œìˆ˜-1],slist[0]);
    }; ////////// chgSeqí•¨ìˆ˜ ///////////

    // 2ë²ˆ ë§¨ë’¤ ë§¨ì•ì´ë™ í•¨ìˆ˜ í˜¸ì¶œí•˜ê¸°!!!
    for (let i = 0; i < 2; i++) chgSeq();

    // ê´‘í´ê¸ˆì§€ë³€ìˆ˜ : 0 - í—ˆìš©, 1 - ë¶ˆí—ˆìš©
    let prot = 0;

    // 2. ìŠ¬ë¼ì´ë“œ ë³€ê²½í•¨ìˆ˜ ë§Œë“¤ê¸°
    // í˜¸ì¶œì‹œ seqì— ë“¤ì–´ì˜¤ëŠ” ê°’ì¤‘ 1ì€ ì˜¤ë¥¸ìª½, 0ì€ ì™¼ìª½
    const goSlide = (seq) => {
        //  console.log("ìŠ¬ê³ ìš°!", seq);

        //  console.log("ëª»ë“¤ì–´ê°”ì–´!!!!");

        // ê´‘í´ê¸ˆì§€ ì„¤ì •í•˜ê¸° //////
        if (prot) return;
        prot = 1; // ì ê¸ˆ!
        setTimeout(() => {
            prot = 0; // í•´ì œ!
        }, 400); /// 0.4ì´ˆí›„ í•´ì œ! ///

        //  console.log("ë‚˜,ë“¤ì–´ì™”ì–´!!!");

        // 0. í˜„ì¬ì˜ ìŠ¬ë¼ì´ë“œ liìˆ˜ì§‘í•˜ê¸°
        let clist = slide.querySelectorAll("li");
        // clist -> current list í˜„ì¬ ë¦¬ìŠ¤íŠ¸

        // 1. ë°©í–¥ì— ë”°ë¥¸ ë¶„ê¸°
        // 1-1. ì˜¤ë¥¸ìª½ë²„íŠ¼ í´ë¦­ì‹œ ////////////////
        if (seq) {
            console.log("ì˜¤ë¥¸!");

            // 1. ìŠ¬ë¼ì´ë“œ ì´ë™ì „ ë¨¼ì € ì˜ë¼ë‚¸ë‹¤!
            // ì´ìœ : ìŠ¬ë¼ì´ë“œ ìˆœì„œë¥¼ ì™¼ìª½ì´ë™ê³¼ ë™ì¼í•˜ê²Œ í•¨!
            // ì¤‘ì•™í™•ëŒ€ íŠ¸ëœì§€ì…˜ ì ìš©ì‹œ ë™ì‘ì´ ë‹¬ë¼ì§€ë¯€ë¡œ!

            // (1-1) ë°”ê¹¥ì— ë‚˜ê°€ìˆëŠ” ì²«ë²ˆì§¸ ìŠ¬ë¼ì´ë“œ
            //       lië¥¼ ì˜ë¼ì„œ ë§¨ë’¤ë¡œ ë³´ë‚¸ë‹¤!
            slide.appendChild(clist[0]);
            // (1-2) ë™ì‹œì— leftê°’ì„ -110%ìœ¼ë¡œ ë³€ê²½í•œë‹¤!
            slide.style.left = "-110%";
            // (1-3) íŠ¸ëœì§€ì…˜ ì—†ì• ê¸°!
            slide.style.transition = "none";

            // (2) ì˜¤ë¥¸ìª½ ë²„íŠ¼ í´ë¦­ì‹œ ë‹¤ìŒ ìŠ¬ë¼ì´ë“œê°€
            //     ë‚˜íƒ€ë‚˜ë„ë¡ ìŠ¬ë¼ì´ë“œ ë°•ìŠ¤ì˜ leftê°’ì„
            //     -240%ë¡œ ë³€ê²½ì‹œí‚¨ë‹¤.

            // [ì½”ë“œë¶„ë¦¬í•˜ê¸°!] //////////////////////////
            // -> ê°™ì€ì†ì„±ë³€ê²½ì„ ê°™ì€ ë©”ëª¨ë¦¬ê³µê°„ì—ì„œ ìˆ˜í–‰í•˜ë©´
            // ë³€ê²½íš¨ê³¼ê°€ ì—†ìŒ!!!
            setTimeout(() => {
                slide.style.left = "-240%";
                slide.style.transition = "left .4s ease-in-out";
            }, 1); //// íƒ€ì„ì•„ì›ƒ //////
            // ì‹œê°„ì— 0ì„ì“°ë©´ ì¸í„°ë°œí˜¸ì¶œì‹œ íŠ¸ëœì§€ì…˜ì´ ì•ˆë¨¹íˆëŠ” ì—ëŸ¬ê°€ ìˆìŒ
            // 1ë§Œì¨ë„ ê´œì°®ìŒ~

            // -> íƒ€ì´ë°í•¨ìˆ˜ëŠ” ê¸°ì¡´ í•¨ìˆ˜ì¸ ìŠ¤íƒ(Stack)ë©”ëª¨ë¦¬ ê³µê°„ì´ ì•„ë‹Œ
            // ëŒ€ê¸°ì‹¤í–‰ ê³µê°„ì¸ í(Queue)ë©”ëª¨ë¦¬ê³µê°„ì—ì„œ ì‹¤í–‰í•˜ë¯€ë¡œ
            // ì½”ë“œê°€ ë™ì‹œì— ë°”ë€ŒëŠ” ê²ƒì„ ë§‰ì•„ì£¼ê³  ì˜ë„í•œ ëŒ€ë¡œ
            // ì‹œì°¨ì‹¤í–‰ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤!
        } //////////// if : ì˜¤ë¥¸ìª½í´ë¦­ì‹œ //////

        // 1-2. ì™¼ìª½ë²„íŠ¼ í´ë¦­ì‹œ //////////////
        else {
            console.log("ì™¼ìª½!");

            // (1) ì™¼ìª½ë²„íŠ¼ í´ë¦­ì‹œ ì´ì „ ìŠ¬ë¼ì´ë“œê°€
            // ë‚˜íƒ€ë‚˜ë„ë¡ í•˜ê¸°ìœ„í•´ ìš°ì„  ë§¨ë’¤ lië¥¼
            // ë§¨ì•ìœ¼ë¡œ ì´ë™í•œë‹¤.
            // slide.insertBefore(ë„£ì„ë†ˆ,ë„£ì„ë†ˆì „ë†ˆ)
            // slide.insertBefore(ë§¨ëli,ë§¨ì•li)
            slide.insertBefore(clist[clist.length - 1], clist[0]);

            // (2) ë™ì‹œì— leftê°’ì„ -360%ë¡œ ë³€ê²½í•œë‹¤.
            slide.style.left = "-360%";
            // ì´ë•Œ íŠ¸ëœì§€ì…˜ì„ ì—†ì•¤ë‹¤(í•œë²ˆì‹¤í–‰í›„ ë¶€í„° ìƒê¸°ë¯€ë¡œ!)
            slide.style.transition = "none";

            // (3) ê·¸ í›„ leftê°’ì„ -240%ìœ¼ë¡œ ì• ë‹ˆë©”ì´ì…˜í•˜ì—¬
            // ìŠ¬ë¼ì´ë“œê°€ ì™¼ìª½ì—ì„œ ë“¤ì–´ì˜¨ë‹¤.
            // ë™ì¼ ì†ì„±ì¸ leftê°€ ê°™ì€ ì½”ë”©ì²˜ë¦¬ ê³µê°„ì— ë™ì‹œì—
            // ìˆìœ¼ë¯€ë¡œ ì´ê²ƒì„ ë¶„ë¦¬í•´ì•¼ íš¨ê³¼ê°€ ìˆë‹¤!
            // setTimeoutì„ ì‚¬ìš©í•œë‹¤!
            setTimeout(() => {
                slide.style.left = "-240%";
                slide.style.transition = "left .4s ease-in-out";
            }, 0); ////// íƒ€ì„ì•„ì›ƒ /////////
        } //////////// else : ì™¼ìª½í´ë¦­ì‹œ //////

        // 2. í˜„ì¬ ìŠ¬ë¼ì´ë“œ ìˆœë²ˆê³¼ ê°™ì€ ë¸”ë¦¿í‘œì‹œí•˜ê¸°
        // ëŒ€ìƒ: .indic li -> indicë³€ìˆ˜
        // 2-1. í˜„ì¬ ë°°ë„ˆë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸í•˜ê¸°
        // clist = slide.querySelectorAll("li");
        // !!!!! ì˜¤ë¥¸ìª½ì´ë“  ì™¼ìª½ì´ë“  ë¨¼ì € ì˜ë¼ë‚´ê¸° ë•Œë¬¸ì—
        // ìˆœë²ˆì€ 3ë²ˆì§¸ë¡œ ì¼ì¹˜í•¨!!!!!!
        // console.log("ë‹¤ì‹œìˆ˜ì§‘:",clist);

        // 2-2.ë°©í–¥ë³„ ì½ì–´ì˜¬ ìŠ¬ë¼ì´ë“œ ìˆœë²ˆìœ¼ë¡œ "data-seq"ê°’ ì½ì–´ì˜¤ê¸°
        // ì„¸ë²ˆì§¸ ìŠ¬ë¼ì´ë“œê°€ ì£¼ì¸ê³µì´ë‹ˆê¹Œ 0,1,2 ì¦‰ 2ë²ˆì„ ì“°ë©´ë¨!!!
        // let cseq = clist[2].getAttribute("data-seq");
        //  console.log("í˜„ì¬ìˆœë²ˆ:", cseq);

        // 2-3. ë¸”ë¦¿ì´ˆê¸°í™”
        // for (let x of indic) x.classList.remove("on");

        // 2-4. ì½ì–´ì˜¨ ìŠ¬ë¼ì´ë“œ ìˆœë²ˆì˜ ë¸”ë¦¿ì— í´ë˜ìŠ¤ "on"ë„£ê¸°
        // indic[cseq].classList.add("on");
    }; ////////// goSlideí•¨ìˆ˜ ///////////

    // 3. ì´ë™ë²„íŠ¼ëŒ€ìƒì— ì´ë²¤íŠ¸ ì„¤ì •í•˜ê¸°
    abtn.forEach((ele, idx) => {
        ele.onclick = () => {
            // 0. ê¸°ë³¸ì´ë™ë§‰ê¸°
            event.preventDefault();
            // 1. ì¸í„°ë°œì§€ìš°ê¸°í•¨ìˆ˜ í˜¸ì¶œ!
            // clearAuto();

            // 2. ìŠ¬ë¼ì´ë“œ í•¨ìˆ˜ í˜¸ì¶œ!
            goSlide(idx);
        }; ///// clickí•¨ìˆ˜ //////
    }); /////// forEach //////////

    ////////////////////////////
    // ìë™ë„˜ê¹€ ì„¤ì •í•˜ê¸° ////////

    // ì¼ì •ì‹œê°„ê°„ê²© ë„˜ì–´ê°€ê¸°
    // -> setInterval(í•¨ìˆ˜,ì‹œê°„)

    // [ì¸í„°ë°œí•¨ìˆ˜ì˜ í•¨ìˆ˜ì „ë‹¬ê°’ ì‚¬ìš©ì˜ˆ
    // (íƒ€ì„ì•„ì›ƒí•¨ìˆ˜ë„ ë™ì¼í•¨)]
    // 1. í•¨ìˆ˜ì— ì „ë‹¬ê°’ì´ ì—†ìœ¼ë©´ í•¨ìˆ˜ëª…ë§Œ ì‚¬ìš©ê°€ëŠ¥
    // setInterval(goSlide,3000);
    // 2. ì „ë‹¬ê°’ì´ ìˆë‹¤ë©´ ìµëª…í•¨ìˆ˜êµ¬ì—­ì— ì½”ë”©
    // setInterval(function(){goSlide(1)},3000);
    // 3. í™”ì‚´í‘œí•¨ìˆ˜ì‚¬ìš©ê°€ëŠ¥
    // setInterval(()=>{goSlide(1)},3000);
    // 4. í™”ì‚´í‘œí•¨ìˆ˜ì—ì„œ ì¤‘ê´„í˜¸ ìƒëµê°€ëŠ¥
    // setInterval(()=>goSlide(1),3000);

    // ì¸í„°ë°œí•¨ìˆ˜ ì§€ìš°ê¸°ìœ„í•œ ë³€ìˆ˜
    let autoI;
    // íƒ€ì„ì•„ì›ƒí•¨ìˆ˜ ì§€ìš°ê¸°ìœ„í•œ ë³€ìˆ˜
    let autoT;

    /************************************ 
        í•¨ìˆ˜ëª…: autoSlide
        ê¸°ëŠ¥: ì¸í„°ë°œí•¨ìˆ˜ë¡œ ìŠ¬ë¼ì´ë“œí•¨ìˆ˜ í˜¸ì¶œ
    ************************************/
    function autoSlide() {
        console.log("ì¸í„°ë°œì‹œì‘!");
        // ì¸í„°ë°œí•¨ìˆ˜ë¡œ ìŠ¬ë¼ì´ë“œí•¨ìˆ˜ í˜¸ì¶œí•˜ê¸°
        autoI = setInterval(() => goSlide(1), 3000);
    } ////////////// autoSlideí•¨ìˆ˜ //////////

    // ìë™ë„˜ê¹€ ìµœì´ˆí˜¸ì¶œ!
    // autoSlide();

    /************************************ 
        í•¨ìˆ˜ëª…: clearAuto
        ê¸°ëŠ¥: ì¸í„°ë°œí•¨ìˆ˜ë¥¼ ì§€ìš°ê³  ë‹¤ì‹œì…‹íŒ…
   ************************************/
    function clearAuto() {
        console.log("ì¸í„°ë°œë©ˆì¶¤!");
        // 1. ì¸í„°ë°œ ì§€ìš°ê¸°
        clearInterval(autoI);

        // 2. íƒ€ì„ì•„ì›ƒë„ ì§€ìš°ì§€ ì•Šìœ¼ë©´
        // ìŒ“ì—¬ì„œ íƒ€ì„ì•„ì›ƒ ì“°ë‚˜ë¯¸ì‹¤í–‰ì´ ë°œìƒí•œë‹¤!
        clearTimeout(autoT);

        // 3. ì ì‹œí›„ ë‹¤ì‹œ ì‘ë™í•˜ë„ë¡ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ
        // ì¸í„°ë°œí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤!
        // 5ì´ˆí›„(ì¸í„°ë°œì€ 3ì´ˆí›„, í† íƒˆ 8ì´ˆí›„ ì‘ë™ì‹œì‘)
        autoT = setTimeout(autoSlide, 5000);
    } ///////// clearAuto í•¨ìˆ˜ /////////////
} //////////////// loadFn í•¨ìˆ˜ ///////////////
/////////////////////////////////////////////