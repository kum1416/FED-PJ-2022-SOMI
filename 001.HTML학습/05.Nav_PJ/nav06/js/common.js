// ë„¤ë¹„ê²Œì´ì…˜ ìœ í˜•6 : ê³µí†µ JS - common.js ///

/////// ë¡œë“œêµ¬ì—­ /////////////////////
window.addEventListener("DOMContentLoaded", loadFn);

/****************************************** 
    í•¨ìˆ˜ëª…: loadFn
    ê¸°ëŠ¥: ë¡œë”©í›„ ì‹¤í–‰í•¨ìˆ˜
******************************************/
function loadFn() {
  console.log("ë¡œë”©ì™„ë£Œ!");

  /************************************ 
        GNBë©”ë‰´ ê°ì²´ ë°ì´í„°ë¥¼ ì´ìš©í•œ
        HTMLíƒœê·¸ ë§Œë“¤ì–´ ë„£ê¸°!
    ************************************/
  // 1. ëŒ€ìƒì„ ì •: .gnb
  const gnb = document.querySelector(".gnb");
  //    console.log(gnb);

  // 2. ë³€ìˆ˜ ì…‹íŒ…: htmlì½”ë“œ ë‹´ì„ ë³€ìˆ˜
  let hcode = "";

  // 3. ì½”ë“œì˜ êµ¬ì¡°í™” ìƒì„±í•˜ê¸°
  hcode += `<ul>`;
  // 1. ìƒìœ„ë©”ë‰´ ë°˜ë³µì½”ë“œ ìƒì„±
  // mdataê°ì²´ë¥¼ ê°€ì ¸ì™€ì„œ ë°˜ë³µì‹œí‚´ -> for inë¬¸!
  // console.log(mdata);

  for (let tm in mdata) {
    // tmì€ mdataì˜ ì†ì„±ëª…

    hcode += `
            <li>
                <a href="#">${tm}</a>
                <div class="smenu">
                    <!-- í•˜ìœ„ë©”ë‰´ êµ¬ì¡°ë©í•‘ë°•ìŠ¤ .smbx -->
                    <aside class="smbx">
                        <h2>
                            <div class="stit">${tm}</div>
                            <a href="#">ì „ì²´ë³´ê¸° ï¼</a>
                        </h2>
                        <div class="swrap">
               `;

    // 2. í•˜ìœ„ë©”ë‰´ ë°˜ë³µì½”ë“œ
    // -> ê°ì²´ë°ì´í„° ì´ë¯€ë¡œ for inë¬¸ ì‚¬ìš©!
    // -> mdata[tm] -> mdata[ì†ì„±ëª…] -> ì†ì„±ê°’!
    // -> ì†ì„±ê°’ì€ ì„œë¸Œë©”ë‰´ì´ê³  ê°ì²´ë¡œ êµ¬ì„±ë¨!
    for (let sm in mdata[tm]) {
      // sm - ì†ì„±ëª…(í•˜ìœ„ë©”ë‰´)
      hcode += `<dl>
                        <dt>
                            <a href="#">${sm}</a>
                        </dt>`;

      // 3. ì„œë¸Œë©”ë‰´(ìµœí•˜ìœ„ë©”ë‰´) ë°˜ë³µì½”ë“œ
      // -> ì„œë¸Œë©”ë‰´ëŠ” ë°°ì—´ì´ë¯€ë¡œ for ofì‚¬ìš©!
      for (let sub of mdata[tm][sm]) {
        hcode += `<dd>
                            <a href="#">${sub}</a>
                        </dd>`;
      } ////////// for of ///////////

      hcode += `</dl>`;
    } //////////// for inë¬¸ /////////

    hcode += `
                        </div>
                    </aside>
                </div>
            </li>
    
        `;
  } ///////// for inë¬¸ //////////////////////

  hcode += "</ul>";

  // 4. GNB ë°•ìŠ¤ì— ì¶œë ¥í•˜ê¸°
  gnb.innerHTML = hcode;

  /************************************************** 
        GNB ë©”ë‰´ ì˜¤ë²„ì‹œ ì„œë¸Œë©”ë‰´ ë³´ì´ê¸°
        ______________________________
        
        [ê¸°ëŠ¥ì •ì˜]
        ìƒìœ„ë©”ë‰´ liì— ì˜¤ë²„ì‹œ í•˜ìœ„ë©”ë‰´ .smenu
        ë°•ìŠ¤ì˜ ë‚´ë¶€ ë°ì´í„°ë§Œí¼ heightê°’ì´ ìƒê¸°ë©°
        opcity íˆ¬ëª…ë„ê°€ 1ë¡œ ë³€ê²½ë˜ëŠ” íŠ¸ëœì§€ì…˜ìˆ˜í–‰
        ì•„ì›ƒì‹œ ì›ìƒë³µê·€í•¨!
  **************************************************/
  // 1. ëŒ€ìƒì„ ì •
  // ì´ë²¤íŠ¸ ëŒ€ìƒ: .gnb>ul>li
  const list = document.querySelectorAll(".gnb>ul>li");
  // ì´ë²¤íŠ¸ ì¢…ë¥˜: mouseenter / mouseleave
  // ë³€ê²½ ëŒ€ìƒ1: .smenu
  // ë³€ê²½ ë‚´ìš©1: heightê°’, opacityê°’

  // ë³€ê²½ ëŒ€ìƒ2: .bgbx
  const bgbx = document.querySelector(".bgbx");
  // ë³€ê²½ ë‚´ìš©2: heightê°’, opacityê°’

//    console.log(bgcbx);

      // 2. í•˜ìœ„ë©”ë‰´ + ë©”ë‰´ë°°ê²½ styleë³€ê²½í•¨ìˆ˜ ë§Œë“¤ê¸°
      // ele - ë³€ê²½ìš”ì†Œ, hv - ë†’ì´ê°’, opa - íˆ¬ëª…ë„ê°’
      const stFn = (ele,hv,opa) => { /* ğŸ“¢ì•„ë˜ë‚´ìš©ì„ ì—˜ëŸ¬ë¨¼íŠ¸,ë†’ì´ê°’,ì˜¤íŒŒì— ë‹´ì•„ì„œ ì²˜ë¦¬ */
          ele.style.height = hv + "px";
          ele.style.opacity = opa;
      }; //// stFn /////

  // 3. ìƒìœ„ë©”ë‰´ liì— ì´ë²¤íŠ¸ ì„¤ì •í•˜ê¸° ////////////////
  for (let x of list) {
    // (1) ë§ˆìš°ìŠ¤ ì˜¤ë²„ì‹œ /////
    x.onmouseenter = () => {
      // (1) í•˜ìœ„ë©”ë‰´ ë°•ìŠ¤ .smenu ì„ íƒí•˜ì—¬ ë³€ê²½í•˜ê¸°
      let tg = x.querySelector(".smenu"); /* ğŸ“¢ë³€ìˆ˜ì— ë‹´ê¸°! smenuë¥¼ í•œë²ˆì— ì°¾ì•„ì¤˜~ */

      // (2) í•˜ìœ„ë©”ë‰´ ë°•ìŠ¤ ë‚´ë¶€ë°•ìŠ¤ ë†’ì´ê°’ êµ¬í•˜ê¸°
      let hv = tg.querySelector(".smbx").clientHeight;
      // console.log("ë‚´ë¶€ë†’ì´:",hv);

      /// ë°–ìœ¼ë¡œ ê°€ì§€ê³  ë‚˜ê°€ì„œ ì§€ì›Œë²„ë¦¼ ////
      // (3) í•˜ìœ„ë©”ë‰´ + ë©”ë‰´ë°°ê²½ styleë³€ê²½í•¨ìˆ˜ ë§Œë“¤ê¸°
      /* ğŸ…ì•„ë˜css ì„¤ì •ì„ 2ê°œì ìš©ì‹œí‚¤ê³ ì‹¶ì–´! ë³€ìˆ˜ì—í•¨ìˆ˜ë‹´ê¸°(?) ì•„ë˜ì—ì„œ í˜¸ì¶œ */
      // const stFn = ele => { /* ğŸ“¢ì•„ë˜ë‚´ìš©ì„ ì—˜ëŸ¬ë¨¼íŠ¸ì— ë‹´ì•„ì„œ ì²˜ë¦¬ */
          // ele.style.height = hv + "px";
          // ele.style.opacity = 1; /* ğŸ“¢ìˆ«ìë¼ ë”°ì˜´í‘œ ì•ˆì”€ */
      // }; //// stFn /////
      ////////////////////////////

      // (3) ìŠ¤íƒ€ì¼ ë³€ê²½ìš”ì†Œ í•¨ìˆ˜í˜¸ì¶œ
      // stFn(ìš”ì†Œ,ë†’ì´ê°’,íˆ¬ëª…ë„)
      stFn(tg,hv,1);
      stFn(bgbx,hv,1);
    }; /////// mouseenter /////////

    // (2) ë§ˆìš°ìŠ¤ ì•„ì›ƒì‹œ /////
    x.onmouseleave = () => {
      // (1) í•˜ìœ„ë©”ë‰´ ë°•ìŠ¤ .smenu ì„ íƒí•˜ì—¬ ë³€ê²½í•˜ê¸°
      let tg = x.querySelector(".smenu"); /* ğŸ“¢ë³€ìˆ˜ì— ë‹´ê¸°! smenuë¥¼ í•œë²ˆì— ì°¾ì•„ì¤˜~ */

      // (2) ìŠ¤íƒ€ì¼ ë³€ê²½ìš”ì†Œ í•¨ìˆ˜í˜¸ì¶œ
      // stFn(ìš”ì†Œ,ë†’ì´ê°’,íˆ¬ëª…ë„)
      stFn(tg,"0",1); /* ğŸ…px(ë‹¨ìœ„) ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ë”°ì˜´í‘œ */
      stFn(bgbx,"0",1);
    }; /////// mouseleave /////////
  }
} ///////////// loadFn í•¨ìˆ˜ ////////////////
