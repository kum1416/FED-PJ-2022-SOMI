<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>07.ë“œë˜ê·¸ê¸°ë³¸</title>
    <style>
      body {
        height: 100vh;
        background: url(http://www.kukinews.com/data/kuk/image/2022/08/29/kuk202208290038.jpg) center top/auto 100%;
      }
      .dtg {
        position: relative;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background-color: #f00;

      }
      .dtg1{
        background: url(https://img3.daumcdn.net/thumb/R658x0.q70/?fname=https://t1.daumcdn.net/news/202107/08/JTBC/20210708153002482ktbd.jpg)
        no-repeat center top/cover;
      }
      .dtg2{
        background: url(https://newsimg.hankookilbo.com/cms/articlerelease/2021/03/22/cdf0fd2f-64a6-4e22-b8e6-865da21c7ba8.jpg)
        no-repeat center center/cover;
      }
    </style>
    <script>
      // ë¡œë“œêµ¬ì—­ ////////////////////////////
      window.addEventListener("DOMContentLoaded", () => {
        // ğŸ1. ë“œë˜ê·¸ ëŒ€ìƒì„ ì • : .dtg
        const dtg = document.querySelectorAll(".dtg");
        // console.log(dtg);

        // ğŸ§…2. ë“œë˜ê·¸ ì„¤ì •í•˜ê¸°
        dtg.forEach(ele=>goDrag(ele));


      }); //////////// ë¡œë“œêµ¬ì—­ ////////
      /******************************************* 
                [ ë“œë˜ê·¸ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ì´ë²¤íŠ¸ ]
                1. ë”¸ -> ë§ˆìš°ìŠ¤ í¬ì¸í„° ëˆ„ë¦„ -> mousedown

                2. ê° -> ë§ˆìš°ìŠ¤ í¬ì¸í„° ì˜¬ë¼ì˜´ -> mouseup

                3. ì§ˆì§ˆ -> ë§ˆìš°ìŠ¤ ì›€ì§ì¼ë•Œ -> mousemove
                -> ë“œë˜ê·¸ ìƒíƒœëŠ” "ë”¸"ìƒíƒœì—ì„œ "ì§ˆì§ˆ"í•˜ëŠ”ê²ƒ!

                mousedown í• ë•Œ ë“œë˜ê·¸ ìƒíƒœë³€ìˆ˜ê°’ì„ 1ë¡œ ë³€ê²½
                mouseup í• ë•Œ ë“œë˜ê·¸ ìƒíƒœë³€ìˆ˜ê°’ì„ 0 ìœ¼ë¡œ ë³€ê²½
                ___________________________________________

                [ ë“œë˜ê·¸ ê¸°ëŠ¥êµ¬í˜„ ì›ë¦¬ ]

                1. ë§ˆìš°ìŠ¤ í¬ì¸í„° ìœ„ì¹˜ì— ë”°ë¥¸ ë³€í™” ìˆ˜ì¹˜ë¥¼
                ê³„ì‚°í•˜ì—¬ ìš”ì†Œì˜ top,left ìœ„ì¹˜ê°’ìœ¼ë¡œ ë°˜ì˜í•œë‹¤!

                2. í”„ë¡œì„¸ìŠ¤
                    (1) mousedown ì´ë²¤íŠ¸ì—ì„œëŠ” ì‹œì‘ìœ„ì¹˜ê°’ ì €ì¥
                    (2) mousemove ì´ë²¤íŠ¸ì—ì„œëŠ” ì›€ì§ì¸ìœ„ì¹˜ì™€ ì‹œì‘ìœ„ì¹˜ ì°¨ì´ì €ì¥
                    (3) mousemoveì—ì„œ ì°¨ì´ê°’ì„ íƒ€ê²Ÿìš”ì†Œì˜ left,topê°’ì— ë°˜ì˜
                    (4) mouseup ì´ë²¤íŠ¸ì—ì„œëŠ” ë‹¤ìŒ ì´ë™ì„ ìœ„í•œ ë§ˆì§€ë§‰ìœ„ì¹˜ ì €ì¥
                    (5) mousemove ì´ë²¤íŠ¸ì—ì„œ ë§ˆì§€ë§‰ìœ„ì¹˜ë¡œ ë¶€í„°ì˜ ì´ë™ì„ ê³„ì‚°í•¨


            *******************************************/

      /************************************************ 
                [ ğŸ§…ë“œë˜ê·¸ ë‹¤ì¤‘ì ìš© í•¨ìˆ˜ ë§Œë“¤ê¸° ]
                í•¨ìˆ˜ëª…: goDrag
                ê¸°ëŠ¥: ë‹¤ì¤‘ ë“œë˜ê·¸ ê¸°ëŠ¥ ì ìš©
            ************************************************/
      function goDrag(obj) { // obj - ë“œë˜ê·¸ ëŒ€ìƒ ğŸ§…objë°›ê¸°!


        // ë³€ìˆ˜ë§Œë“¤ê¸° (ë“œë˜ê·¸ìƒíƒœ ë³€ìˆ˜)
        // ğŸ(1) ë“œë˜ê·¸ ìƒíƒœë³€ìˆ˜
        // ğŸ“¢ì²˜ìŒì€ ë“œë˜ê·¸í•˜ëŠ”ì¤‘ì´ ì•„ë‹ˆë‹ˆê¹Œ false-ë“œë˜ê·¸ì•„ë‹˜
        let drag = false; // true-ë“œë˜ê·¸ì¤‘, false-ë“œë˜ê·¸ì•„ë‹˜
        // ğŸ“(2) ì²«ë²ˆì§¸ ìœ„ì¹˜ í¬ì¸íŠ¸ first x, first y
        let fx, fy;
        // ğŸ“(3) ë§ˆì§€ë§‰ ìœ„ì¹˜í¬ì¸íŠ¸ last x, last y
        let lx = 0, ly = 0; // ë§ˆì§€ë§‰ìœ„ì¹˜ëŠ” ì²˜ìŒì— 0í• ë‹¹!
        // ğŸ“(4) ì›€ì§ì¼ë•Œ ìœ„ì¹˜í¬ì¸íŠ¸ move x, move y
        let mvx, mvy;
        // ğŸ“(5) ìœ„ì¹˜ì´ë™ ì°¨ì´ ê²°ê³¼ë³€ìˆ˜ result x, result y
        let rx, ry;

        // ğŸí•¨ìˆ˜ ë§Œë“¤ê¸°(í• ë‹¹í˜• ìµëª…í•¨ìˆ˜)
        // (1) ë“œë˜ê·¸ìƒíƒœ true ğŸ“¢ë“œë˜ê·¸ ìƒíƒœì—ì„œ íŠ¸ë£¨ë¥¼ í• ë‹¹í•´ì£¼ëŠ” ì—­í• 
        const dTrue = () => (drag = true);

        // (2) ë“œë˜ê·¸ìƒíƒœ false
        const dFalse = () => (drag = false);

        // (3) ë“œë˜ê·¸ ì›€ì§ì¼ë•Œ ì‘ë™í•¨ìˆ˜
        const dMove = () => {
          // console.log("ë“œë˜ê·¸ìƒíƒœ:",drag);

          // ğŸ“ë“œë˜ê·¸ ìƒíƒœì¼ë•Œë§Œ ì‹¤í–‰
          if (drag) {
            // 1. ë“œë˜ê·¸ ìƒíƒœì—ì„œ ì›€ì§ì¼ë•Œ ìœ„ì¹˜ê°’ : mvx,mvy
            mvx = event.pageX;
            mvy = event.pageY;

            // 2. ì›€ì§ì¼ë•Œ ìœ„ì¹˜ê°’ - ì²˜ìŒ ìœ„ì¹˜ê°’ : rx, ry
            // xì¶•ê°’ì€ leftê°’, yì¶•ê°’ì€ topê°’ ì´ë™ì´ë‹¤!
            rx = mvx - fx;
            ry = mvy - fy;

            // 3. x,y ì›€ì§ì¸ ìœ„ì¹˜ê°’ì„ íƒ€ê²Ÿìš”ì†Œì— ì ìš©! ğŸ§…dtg->obj
            obj.style.left = rx + lx + "px";
            obj.style.top = ry + ly + "px";
            // í•œë²ˆë“œë˜ê·¸ í›„ ë‹¤ì‹œ ë“œë˜ê·¸ì‹œ ì›€ì§ì¸ ìœ„ì¹˜ê°’ì´ í•„ìš”í•¨!
            // -> ë§ˆì§€ë§‰ ìœ„ì¹˜ê°’ ì €ì¥í•„ìš” -> lx,ly
            // -> í•­ìƒ ìµœì¢…ìœ„ì¹˜ì—ì„œ ì›€ì§ì¸ ìœ„ì¹˜ë¥¼ ë”í•œë‹¤!

            console.log(`fx:${fx} | fy:${fy}`);
            console.log(`mvx:${mvx} | mvy:${mvy}`);
            console.log(`rx:${rx} | ry:${ry}`);
            console.log(`lx:${lx} | ly:${ly}`);
          } //////// if : ë“œë˜ê·¸ì¼ë•Œ //////
        }; ////////////// dMove ////////////////

        // ğŸ“(4) ì²«ë²ˆì§¸ ìœ„ì¹˜í¬ì¸íŠ¸ ì…‹íŒ…í•¨ìˆ˜
        const firstPoint = () => {
          fx = event.pageX;
          fy = event.pageY;
        };

        // ğŸ¥¦(5) ë§ˆì§€ë§‰ ìœ„ì¹˜í¬ì¸íŠ¸ ì…‹íŒ…í•¨ìˆ˜
        const lastPoint = () => {
          lx += rx;
          ly += ry;
        };
        // ìµœì¢… ì´ë™ê²°ê³¼ ê°’ì¸ rx,ryë¥¼ í•­ìƒ ëŒ€ì…ì—°ì‚°í•˜ì—¬ ê°’ì„ ì—…ë°ì´íŠ¸í•œë‹¤!

        // ğŸì´ë²¤íŠ¸ ë“±ë¡í•˜ê¸° ///// ğŸ§…dtg->obj
        // (1) ë§ˆìš°ìŠ¤ ë‚´ë ¤ê°ˆë•Œ : ë“œë˜ê·¸ true + ì²«ë²ˆì§¸ ìœ„ì¹˜ê°’ ì—…ë°ì´íŠ¸ğŸ“
        obj.addEventListener("mousedown", () => {
          dTrue();
          firstPoint();
        }); // í•¨ìˆ˜í˜¸ì¶œ 2ê°œ
        // (2) ë§ˆìš°ìŠ¤ ì˜¬ë¼ì˜¬ë•Œ : ë“œë˜ê·¸ false + ë§ˆì§€ë§‰ ìœ„ì¹˜ê°’ ì—…ë°ì´íŠ¸ğŸ¥¦
        obj.addEventListener("mouseup", () => {
          dFalse();
          lastPoint();
        });
        // (3) ë§ˆìš°ìŠ¤ ì›€ì§ì¼ë•Œ
        obj.addEventListener("mousemove", dMove);
        // (4) ë§ˆìš°ìŠ¤ ë²—ì–´ë‚ ë•Œ
        obj.addEventListener("mouseleave", dFalse);
      } //////// goDrag í•¨ìˆ˜ ////////////////////////


    </script>
  </head>
  <body>
    <div class="dtg dtg1"></div>
    <div class="dtg dtg2"></div> <!-- ğŸ§…ì¶”ê°€ -->
  </body>
</html>
