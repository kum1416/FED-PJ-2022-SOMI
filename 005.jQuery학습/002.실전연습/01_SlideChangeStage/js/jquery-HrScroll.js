// ì œì´ì¿¼ë¦¬ë¡œ êµ¬í˜„í•œ ê°€ë¡œë°©í–¥ ìŠ¤í¬ë¡¤ JS : jquery-HrScroll.js

// ë¡œë”©êµ¬ì—­ì—†ì´ í•¨ìˆ˜ë¡œ êµ¬í˜„í•¨! /////

/****************************************** 
    ëŒ€ìƒ ë³€ìˆ˜í• ë‹¹í•˜ê¸°
******************************************/
// ì „ì²´ í˜ì´ì§€ë²ˆí˜¸
// let cnt_sc = 0;

// 1. í˜ì´ì§€ë²ˆí˜¸ ëŒ€ì‹  ìŠ¤í¬ë¡¤íšŸìˆ˜
let cnt_sc = 0;

// 2. ì´ë™ë‹¨ìœ„!
const unit_sc = 200; // ğŸ¥š200pxë§Œí¼ì”© ê°€ê²Œí•˜ê² ë‹¤

// 3. ìŠ¤í¬ë¡¤ íšŸìˆ˜ í•œê³„ê°’ : í™”ë©´ê°€ë¡œí­*í˜ì´ì§€ìˆ˜  ğŸ¥šëª¨ë“ˆì´ë‹ˆê¹Œ ë°”ë¡œ ì“´ë‹¤..?
let limit_sc = $(window).width()*7;
console.log("limit_sc:",limit_sc);

// í˜ì´ì§€ ìš”ì†Œ
const pg = $(".page");
// ì „ì²´ í˜ì´ì§€ê°œìˆ˜
const pgcnt = pg.length;
// console.log("í˜ì´ì§€ê°œìˆ˜:", pgcnt, pg);
// ê´‘ì‹¤í–‰ê¸ˆì§€ë³€ìˆ˜
let prot = [];
// ê´‘ìŠ¤í¬ë¡¤ê¸ˆì§€
prot[0] = 0;
// GNB ë©”ë‰´ li
const gnb = $(".gnb li");
// indic ë©”ë‰´ li
const indic = $(".indic li");
// ê° í˜ì´ì§€ë³„ ë“±ì¥ìš”ì†Œ
const minfo = $(".minfo");

/****************************************** 
    ì´ë²¤íŠ¸ ë“±ë¡í•˜ê¸°
******************************************/
// ìœˆë„ìš° íœ ì´ë²¤íŠ¸ ë°œìƒì‹œ
$(window).on("wheel", wheelFn);
// GNBë©”ë‰´ í´ë¦­ì‹œ : ëŒ€ìƒ - .gnb a
$(".gnb a").click(chgMenu);
// ì¸ë””ì¼€ì´í„° í´ë¦­ì‹œ : ëŒ€ìƒ - .indic a
$(".indic a").click(chgMenu);

// í‚¤ë³´ë“œ ì´ë²¤íŠ¸ë°œìƒì‹œ ì—…ë°ì´íŠ¸
// 1. Page Up(33) / Up Arrow (38) 
// 2. Page Down(34) / Down Arrow (40) 
$(document).keydown((e)=>{
    // ì´ì „í˜ì´ì§€ì´ë™
    if(e.keyCode===33 || e.keyCode===38){
        cnt_sc--;
        if (cnt_sc === -1) cnt_sc = 0;
        movePg();
    }
    // ë‹¤ìŒí˜ì´ì§€ì´ë™
    else if(e.keyCode===34 || e.keyCode===40){
        cnt_sc++;
        if (cnt_sc === pgcnt) cnt_sc = pgcnt - 1;
        movePg();
    }
}); ///////////// keydown ////////////////


// ìƒˆë¡œê³ ì¹¨ì‹œ ìŠ¤í¬ë¡¤ìœ„ì¹˜ ìºì‹± ë³€ê²½í•˜ê¸°(ë§¨ìœ„ë¡œ!)
$("html,body").animate({ scrollLeft: "0px" });


/**************************************** 
    í•¨ìˆ˜ëª…: wheelFn
    ê¸°ëŠ¥: ë§ˆìš°ìŠ¤íœ  ì´ë²¤íŠ¸ ë°œìƒì‹œ í˜¸ì¶œë¨
    -> í•œí˜ì´ì§€ì”© ìë™ìŠ¤í¬ë¡¤ ê¸°ëŠ¥
****************************************/
function wheelFn() {
    // ê´‘íœ ê¸ˆì§€
    if (prot[0]) return;
    chkCrazy(0);

    console.log("íœ ~~~~~~!");

    // 1.íœ ë°©í–¥ ì•Œì•„ë‚´ê¸°
    let delta = event.wheelDelta;
    console.log(delta);

    // 2. ë°©í–¥ì— ë”°ë¥¸ í˜ì´ì§€ë²ˆí˜¸ ì¦ê°
    if (delta < 0) {
        
        // ìŠ¤í¬ë¡¤íšŸìˆ˜*ë‹¨ìœ„ì´ë™ê°’ í¬ê¸°ê°€
        // ì „ì²´í¬ê¸°ë³´ë‹¤ ì‘ì„ë•Œë§Œ ++ì²˜ë¦¬í•¨!
        if(cnt_sc*unit_sc < limit_sc){
            cnt_sc++;
        }
        
    } //// if /////
    else {
        cnt_sc--;
        if (cnt_sc === -1) cnt_sc = 0;
        // ì²«í˜ì´ì§€ë²ˆí˜¸ì— ê³ ì •!
    } //// else ////

    console.log(cnt_sc);

    // 3. ìŠ¤í¬ë¡¤ ì´ë™í•˜ê¸° + ë©”ë‰´ì— í´ë˜ìŠ¤"on"ë„£ê¸°
    movePg();
} /////////////// wheelFn í•¨ìˆ˜ ///////////////

// ê´‘í´ ì´ˆê¸°ê°’
prot[1] = 0;
/******************************************** 
    í•¨ìˆ˜ëª…: chgMenu
    ê¸°ëŠ¥: ë©”ë‰´ í´ë¦­ì‹œ ë©”ë‰´ë³€ê²½ê³¼ í˜ì´ì§€ì´ë™
********************************************/
function chgMenu() {
    // 0. ê´‘í´ê¸ˆì§€
    if (prot[1]) return;
    chkCrazy(1);

    // 1. í´ë¦­ëœ aìš”ì†Œì˜ ë¶€ëª¨ li ìˆœë²ˆì„ êµ¬í•¨ === cnt_sc
    let idx = $(this).parent().index();

    console.log("ë‚˜,í´ë¦­?", this, idx);

    // 2. ì „ì—­í˜ì´ì§€ë²ˆí˜¸ì— ìˆœë²ˆ ì—…ë°ì´íŠ¸
    cnt_sc = idx;

    // 3. í˜ì´ì§€ì´ë™ + ë©”ë‰´ì— í´ë˜ìŠ¤"on"ë„£ê¸°
    movePg();
} ////////// chgMenu í•¨ìˆ˜ ///////////////////

/******************************************** 
    í•¨ìˆ˜ëª…: chkCrazy
    ê¸°ëŠ¥: ê´‘ì ë™ì‘ ì²´í¬í•˜ì—¬ ì œì–´ë¦¬í„´
********************************************/
function chkCrazy(seq) {
    // seq ê´€ë¦¬ë³€ìˆ˜ ìˆœë²ˆ
    prot[seq] = 1;
    setTimeout(() => (prot[seq] = 0), 800);
} //////// chkCrazyí•¨ìˆ˜ //////////////

/******************************************** 
    í•¨ìˆ˜ëª…: movePg
    ê¸°ëŠ¥: í˜ì´ì§€ì´ë™ ì• ë‹ˆë©”ì´ì…˜
********************************************/
function movePg() {
    // ëŒ€ìƒ: html,body -> ë‘ê°œë¥¼ ëª¨ë‘ ì¡ì•„ì•¼ ê³µí†µì ìœ¼ë¡œ ì ìš©ë¨!
    $("html,body")
    .stop()
    .animate({ 
        // ê°€ë¡œìŠ¤í¬ë¡¤ì´ë™ì´ë¯€ë¡œ scrollLeftë¡œ ì ìš©í•¨!
        // ê°€ë¡œìŠ¤í¬ë¡¤ ì´ë™ ê¸°ì¤€ì€ ìœˆë„ìš° width ì„!
            scrollLeft: 
            $(window).width() * cnt_sc + "px",
        },
        700,
        "easeInOutQuint",
        showEle // ì´ë™í›„ ì½œë°±í•¨ìˆ˜í˜¸ì¶œ!
    );

    // ëŒ€ìƒ: GNBë©”ë‰´ , ì¸ë””ì¼€ì´í„° ë©”ë‰´
    gnb.eq(cnt_sc).addClass("on").siblings().removeClass("on");
    indic.eq(cnt_sc).addClass("on").siblings().removeClass("on");
} ///////////////// movePg ////////////////

// ë“±ì¥í•  ìš”ì†Œ ì´ˆê¸°í™” /////
minfo.css({
    opacity: 0,
    transform: "translate(-50%,50%)",
    transition: ".3s ease-out",
}); ///////// css //////

/******************************************** 
    í•¨ìˆ˜ëª…: showEle
    ê¸°ëŠ¥: í˜ì´ì§€ì´ë™í›„ ìš”ì†Œ ë“±ì¥í•˜ê¸°
********************************************/
function showEle() {
    // .minfo í˜ì´ì§€ë³„ ë“±ì¥í•˜ê¸°!
    pg.eq(cnt_sc).find(".minfo").css({
        opacity: 1,
        transform: "translate(-50%,-50%)",
    }) ///////// css //////
    // ë‹¤ë¥¸í˜ì´ì§€ ì´ˆê¸°í™”
    .parents(".page").siblings().find(".minfo")
    .css({
        opacity: 0,
        transform: "translate(-50%,50%)",
        transition: ".3s ease-out",
    }); ///////// css //////
} /////////// showEle í•¨ìˆ˜ ///////////////////

// ë“±ì¥ì•¡ì…˜í•¨ìˆ˜ ìµœì´ˆí˜¸ì¶œ ///
setTimeout(showEle, 1000);