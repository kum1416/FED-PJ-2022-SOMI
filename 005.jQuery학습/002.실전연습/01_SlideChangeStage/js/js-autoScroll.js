// JSë¡œ êµ¬í˜„í•œ ìë™í˜ì´ì§€ íœ  JS : js-autoScroll.js

// ìƒˆë¡œê³ ì¹¨í• ë•Œ ìŠ¤í¬ë¡¤ìœ„ì¹˜ ìºì‹± ë¬´ì‹œí•˜ê³  ë§¨ìœ„ë¡œ ì´ë™!
// scrollTo(ê°€ë¡œ,ì„¸ë¡œ) -> ìœ„ì¹˜ì´ë™ ë©”ì„œë“œ
setTimeout(() => {
  window.scrollTo(0, 0);
}, 100);

// ì´ë²¤íŠ¸í•¨ìˆ˜ì—°ê²° ì…‹íŒ…í•˜ê¸° //////////////////////////////////
// ë¡œë”©í•¨ìˆ˜ í˜¸ì¶œ ////////
window.addEventListener("DOMContentLoaded", loadFn); // ğŸ“¢ìµœì´ˆí˜¸ì¶œ

/************************************* 
    í•¨ìˆ˜ëª…: loadFn
    ê¸°ëŠ¥: í˜ì´ì§€ ë¡œë”©ì‹œ ê¸°ëŠ¥ìˆ˜í–‰
*************************************/
function loadFn() {
  // í˜¸ì¶œí™•ì¸
  console.log("ë¡œë”©ì™„ë£Œ!");

  // [ ì´ë²¤íŠ¸ ì—°ê²° ëŒ€ìƒì„ ì •í•˜ê¸° ] //////
  // ğŸ£(1) GNBë©”ë‰´ /////
  const gnb = document.querySelectorAll(".gnb a");
  console.log(gnb);
  // ğŸ“(2) ì¸ë””ì¼€ì´í„° ë©”ë‰´ /////
  const indic = document.querySelectorAll(".indic a");
  console.log(indic);

  // [ ì´ë²¤íŠ¸ ì—°ê²° í•¨ìˆ˜ë“±ë¡í•˜ê¸° ] //////
  // ğŸ£(1) GNBë©”ë‰´ ì´ë²¤íŠ¸ì—°ê²° ğŸ¥ŸğŸŠ
  gnb.forEach((ele, idx, obj) => {
    // ele-ìš”ì†Œ, idx-ìˆœë²ˆ, obj-ì „ì²´ê°ì²´ ğŸ“¢gnbê°€ ì—¬ëŸ¬ê°œë¼ì„œ forEachë¥¼ ì¨ì¤Œ
    ele.addEventListener("click", () => movePg(idx, obj)); //ğŸ“¢ìœ„ì—ìˆëŠ” idxë¥¼ ê°€ì ¸ì™€ì„œ (?)
    // ì „ì²´ ê°ì²´(obj)ë¥¼ í•¨ìˆ˜ì— ì „ë‹¬í•˜ëŠ” ì´ìœ ëŠ”?
    // -> ì¸ë””ì¼€ì´í„°ë„ GNBì™€ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì—
    // í˜¸ì¶œì‹œ ìê¸°ìì‹  ì „ì²´ë¥¼ ë³´ë‚´ì•¼ ê°ê°ì— ë§ê²Œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ!
  }); ////// forEach /////////

  // ğŸ“(2) ì¸ë””ì¼€ì´í„° ë©”ë‰´ ì´ë²¤íŠ¸ì—°ê²° ğŸ¥ŸğŸŠ
  indic.forEach((ele, idx, obj) => {
    // ele-ìš”ì†Œ, idx-ìˆœë²ˆ, obj-ì „ì²´ê°ì²´ ğŸ“¢indicì´ ì—¬ëŸ¬ê°œë¼ì„œ forEachë¥¼ ì¨ì¤Œ
    ele.addEventListener("click", () => movePg(idx, obj));
  }); ////// forEach /////////

  /************************************************************* 
        [ íœ  ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•œ í˜ì´ì§€ ì´ë™ ì»¨íŠ¸ë¡¤í•˜ê¸°! ]
        - íœ  ì´ë²¤íŠ¸ëª… : wheel
        (ì˜ˆì „ì—” mousewheel ì´ë²¤íŠ¸ê°€ ì‚¬ìš©ë¨ - ê³µì‹ì ìœ¼ë¡œ íê¸°ë¨)
        
        1. ì‚¬ìš©ë²• : 
            (1) ì´ë²¤íŠ¸ì†ì„±ì— í•¨ìˆ˜ë¥¼ í• ë‹¹
                ìš”ì†Œ.onwheel = í•¨ìˆ˜
            (2) ë¸Œë¼ìš°ì € ì´ë²¤íŠ¸ì— ë“±ë¡í•¨
                ìš”ì†Œ.addEventListner("wheel",í•¨ìˆ˜,{ì˜µì…˜})

        2. í¬ì¸íŠ¸ : 
            (1) ê¸°ì¡´ íœ ì´ë™ ê¸°ëŠ¥ì€ ì •ì§€í•œë‹¤!
            -> event.preventDefault()
            (2) íœ  ë°©í–¥ì„ ì•Œì•„ë‚´ì–´ ê¸°ëŠ¥ê³¼ ë§¤ì¹­í•œë‹¤!
            -> event.wheelDelta (íœ ë°©í–¥ì†ì„±)
            (3) í˜ì´ì§€ë²ˆí˜¸ë¥¼ ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤!
            -> let pgnum = 0

        3. íœ  ì´ë²¤íŠ¸ ëŒ€ìƒ:
            (1) ì „ì²´ ìŠ¤í¬ë¡¤ë°”ì¸ ê²½ìš° : window
            (2) ê°œë³„ë°•ìŠ¤ì¸ ê²½ìš° : ì„ íƒìš”ì†Œ

        4. scroll ì´ë²¤íŠ¸ì™€ wheel ì´ë²¤íŠ¸ ë¹„êµ
            (1) ê³µí†µì  : ìŠ¤í¬ë¡¤ë˜ëŠ” í˜ì´ì§€ì˜ ìœ„ì¹˜ì´ë™
            (2) ì°¨ì´ì  : ë§ˆìš°ìŠ¤ íœ ì˜ ë™ì‘ì—ë§Œ ë°˜ì‘í•˜ëŠ” ì´ë²¤íŠ¸ëŠ” wheel
                ìŠ¤í¬ë¡¤ë°”ì˜ ì´ë™ì— ë°˜ì‘í•˜ëŠ” ì´ë²¤íŠ¸ëŠ” scroll
        _______________________________________________________

        [ addEventListener ë©”ì„œë“œì˜ ì˜µì…˜ì— ê´€í•˜ì—¬ ]
        ê¸°ì¡´ addEventListenerì˜ 3ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ìº¡ì³ë§/ë²„ë¸”ë§ ì—¬ë¶€ë¥¼ 
        ì œì–´í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ EventListenerOptionsì´ë¼ëŠ” ê°ì²´í˜•íƒœì˜ 
        ì¶”ê°€ ì˜µì…˜ì„ ë°›ì„ìˆ˜ ìˆìŒ

        EventListenerOptions ì‚¬ìš© ì „
        document.addEventListener('touchstart', handler, false);

        EventListenerOptions ì‚¬ìš© í›„
        document.addEventListener("touchstart", handler, {
            capture: false,
            once: false,
            passive: false
        });

        â€» í˜„ì¬ í¬ë¡¬ì—ì„œ ì§€ì›í•˜ëŠ” EventListenerOptions ì˜µì…˜ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

        (1) capture: ì´ë²¤íŠ¸ ìº¡ì³ë§ ì ìš© ì—¬ë¶€. í¬ë¡¬ 49ë¶€í„° ì§€ì›
        (2) once: ì´ë²¤íŠ¸ë¥¼ í•œë²ˆë§Œ í˜¸ì¶œí•˜ê³  í•´ì œë˜ëŠ” ì˜µì…˜. í¬ë¡¬ 55ë¶€í„° ì§€ì›
        (3) passive: ìŠ¤í¬ë¡¤ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì˜µì…˜ìœ¼ë¡œ trueì¼ ê²½ìš°, 
                ìŠ¤í¬ë¡¤ì„ ìœ„í•´ ë¸”ë¡ë˜ëŠ” ê²ƒì„ ë°©ì§€í•¨. ì´ ê²½ìš°, 
                preventDefaultë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ. í¬ë¡¬ 51ë¶€í„° ì§€ì›
                ì´ ì¤‘, passive ì†ì„±ì€ ì„±ëŠ¥í–¥ìƒì„ ìœ„í•´, 
                ë¸Œë¼ìš°ì €ì˜ ê¸°ëŠ¥ì„ í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ì œì–´í• ìˆ˜ ìˆìŒ
                _____________________________________________

                -> ìµœê·¼ ì—…ë°ì´íŠ¸ ëœ ë¸Œë¼ìš°ì €ëŠ” passiveê¸°ë³¸ê°’ì´
                true ë¡œ ì…‹íŒ…ë¨ìœ¼ë¡œ window, document, body ì´ ì„¸ê°€ì§€
                ê°ì²´ëŒ€í•´ ìŠ¤í¬ë¡¤ ë§‰ê¸°ê¸°ëŠ¥ì€ ë¹„í™œì„±í™” í•˜ì˜€ë‹¤!!!
                ë”°ë¼ì„œ ê¸°ë³¸ê¸°ëŠ¥ì„ ë§‰ê³ ì í•˜ë©´ passive:false
                ë¡œ ê¸°ëŠ¥ì„ í™œì„±í™” í•´ì•¼í•œë‹¤!!!


    *************************************************************/

  // 0. ë³€ìˆ˜ ì„¤ì •í•˜ê¸°
  // ğŸ¥¨(1) ì „ì²´ í˜ì´ì§€ë³€ìˆ˜
  let pgnum = 0; // í˜„ì¬ í˜ì´ì§€ë²ˆí˜¸(ì²«í˜ì´ì§€ 0)
  // ğŸ†(2) ì „ì²´ í˜ì´ì§€ìˆ˜
  const pgcnt = document.querySelectorAll(".page").length;
  console.log("ì „ì²´í˜ì´ì§€ìˆ˜:", pgcnt);
  // ğŸŒ½(3) ê´‘ìŠ¤í¬ë¡¤ ê¸ˆì§€ë³€ìˆ˜(0-í—ˆìš©,1-ë¶ˆí—ˆìš©)
  let prot_sc = 0;

  // 1. ì „ì²´ íœ  ì´ë²¤íŠ¸ ì„¤ì •í•˜ê¸° ///////
  window.addEventListener("wheel", wheelFn, { passive: false });

  // 2. íœ  ì´ë²¤íŠ¸ í•¨ìˆ˜ ë§Œë“¤ê¸° ////////
  function wheelFn(e) {
    // e - ì´ë²¤íŠ¸ ì „ë‹¬ë³€ìˆ˜
    // (0) ê¸°ë³¸ê¸°ëŠ¥ ë©ˆì¶”ê¸°
    // addEventListener ì˜µì…˜ passive.false í•„ìˆ˜!
    e.preventDefault();

    // ğŸŒ½ê´‘ìŠ¤í¬ë¡¤ë§‰ê¸°! ////
    if (prot_sc) return;
    prot_sc = 1; // ì‹ í˜¸ 1ê°œë§Œ í—ˆìš© ğŸ“¢ì—°ì†ëœ ì‹ í˜¸ì¤‘ 1ê°œë§Œ ë°›ì•„ë“¤ì„
    setTimeout(() => (prot_sc = 0), 800);
    // 0.8ì´ˆì˜ ì‹œê°„í›„ ë‹¤ì‹œ í—ˆìš©ìƒíƒœì „í™˜ //

    // (1) í˜¸ì¶œí™•ì¸
    // console.log("íœ ~~~~~");

    // (2)íœ  ë°©í–¥ ì•Œì•„ë‚´ê¸°
    // ì´ë²¤íŠ¸ê°ì²´.wheelDelta
    let dir = e.wheelDelta;

    console.log("ë°©í–¥:", dir);
    // íœ ë‚´ë¦¬ë©´ ë§ˆì´ë„ˆìŠ¤(ì˜¬ë¦¬ë©´ í”ŒëŸ¬ìŠ¤)

    // (3) ë°©í–¥ì— ë”°ë¥¸ í˜ì´ì§€ë²ˆí˜¸ ì¦ê°
    // ìŠ¤í¬ë¡¤ ì•„ë«ë°©í–¥ : í˜ì´ì§€ë²ˆí˜¸ ì¦ê°€
    if (dir < 0) {
      // í˜ì´ì§€ë²ˆí˜¸ 1ì”©ì¦ê°€
      pgnum++;
      // ğŸ†í•œê³„ìˆ˜ : í˜ì´ì§€ ëë²ˆí˜¸(í˜ì´ì§€ìˆ˜-1)ğŸ¥¨
      if (pgnum > pgcnt - 1) pgnum = pgcnt - 1;
    } //////// if //////

    // ìŠ¤í¬ë¡¤ ìœ—ë°©í–¥ : í˜ì´ì§€ë²ˆí˜¸ ê°ì†Œ
    else {
      // í˜ì´ì§€ë²ˆí˜¸ 1ì”©ê°ì†Œ
      pgnum--;
      // í•œê³„ìˆ˜ : í˜ì´ì§€ ì²«ë²ˆí˜¸ -> 0
      if (pgnum < 0) pgnum = 0;
    } ///// else ///////////

    console.log("í˜ì´ì§€ë²ˆí˜¸:", pgnum);

    // ğŸ‰(4) í˜ì´ì§€ ì´ë™í•˜ê¸° + ë©”ë‰´ë³€ê²½ -> updatePgí•¨ìˆ˜í˜¸ì¶œ!ğŸ£ğŸ“
    updatePg(gnb);
    updatePg(indic);
  } ////////////// wheelFn í•¨ìˆ˜ /////////

  /***************************************** 
      ğŸ¥Ÿí•¨ìˆ˜ëª… : movePg
      ê¸°ëŠ¥: ë©”ë‰´ í´ë¦­ì‹œ í•´ë‹¹ìœ„ì¹˜ë¡œ ì´ë™í•˜ê¸°
  *****************************************/
  function movePg(seq, obj) {
    // seq-ìˆœë²ˆ, ğŸŠobj-ìš”ì†Œì „ì²´ ğŸ“¢ì „ë‹¬ë³€ìˆ˜
    // 1. ê¸°ë³¸ê¸°ëŠ¥ë§‰ê¸° ğŸ“¢ë¥¼í•˜ê³  ë‚´ê°€ ì›í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
    event.preventDefault(); //ğŸ“¢ì¤‘ìš”ê°ì²´ê°€ ì•„ë‹Œê²½ìš° ë§‰ê¸°í—ˆìš©

    // 2. í˜¸ì¶œí™•ì¸
    console.log("ì´ë™", seq, obj);

    // ğŸ¥¨3. í˜ì´ì§€ë²ˆí˜¸(pgnum)ì—…ë°ì´íŠ¸ í•˜ê¸°!
    pgnum = seq;
    console.log("ë©”ë‰´í´ë¦­ í˜ì´ì§€ë²ˆí˜¸:", pgnum);

    // ğŸ‰4. ì—…ë°ì´íŠ¸ í˜ì´ì§€í˜¸ì¶œ -> í˜ì´ì§€ì´ë™, ë©”ë‰´ë³€ê²½ğŸ£ğŸ“
    // ê°œë³„ê°ì²´ë¥¼ ì—…ë°ì´íŠ¸ í• ë•ŒëŠ” objê°€ í•„ìš”í–ˆìœ¼ë‚˜
    // GNBë©”ë‰´ì™€ ì¸ë””ì¼€ì´í„°ê°€ ëª¨ë‘ ì—…ë°ì´íŠ¸ ë¼ì•¼í•˜ë¯€ë¡œ
    // ê°œë³„ objê°€ í•„ìš”ì—†ê²Œë¨!
    updatePg(gnb);
    updatePg(indic);
  } //////////// movePg í•¨ìˆ˜ ///////

  /********************************************** 
    ğŸ‰í•¨ìˆ˜ëª… : updatePg
    ê¸°ëŠ¥ : í˜ì´ì§€ ì´ë™ì‹œ ì„¤ì •ê°’ ì—…ë°ì´íŠ¸í•˜ê¸°
**********************************************/
  function updatePg(obj) {
    // obj - ë³€ê²½í•  ë©”ë‰´ì „ì²´ ê°ì²´ ğŸ“¢objë¥¼ ë°›ì•„ì„œ ì•ˆì—ì„œ ì²˜ë¦¬!
    // 1. í•¨ìˆ˜í˜¸ì¶œí™•ì¸
    console.log("ì—…ë°ì´íŠ¸!");

    // ğŸ¥¨2. í˜ì´ì§€ ì´ë™í•˜ê¸°
    // scrllTo(ê°€ë¡œ,ì„¸ë¡œ)
    window.scrollTo(0, window.innerHeight * pgnum);
    // ì„¸ë¡œ ì´ë™ìœ„ì¹˜: ìœˆë„ìš°ë†’ì´ê°’*í˜ì´ì§€ë²ˆí˜¸

    // 3. ë©”ë‰´ ì´ˆê¸°í™”í•˜ê¸°(í´ë˜ìŠ¤ on ì œê±°í•˜ê¸°)
    for (let x of obj) x.parentElement.classList.remove("on"); //ğŸ“¢obj-ë„˜ì–´ì˜¨ ìš”ì†ŒëŒê¸°

    // 4. í•´ë‹¹ë©”ë‰´ì— í´ë˜ìŠ¤ ë„£ê¸°
    obj[pgnum].parentElement.classList.add("on");

    // ğŸ¥5. í˜ì´ì§€ ì´ë™í›„ í•´ë‹¹ í˜ì´ì§€ ì•¡ì…˜ì£¼ê¸°
    // pageActioní•¨ìˆ˜ í˜¸ì¶œ!!! (í˜ì´ì§€ì´ë™ ì‹œì°¨ë¥¼ 1ì´ˆì„¤ì •!)
    setTimeout(()=>pageAction(pgnum),1000); //ğŸ“¢ë­”ê°€ë¥¼ ë³´ë‚¼ë•Œ (ì†Œê´„í˜¸) ì¨ì£¼ê¸°
    


  } ///////////// updatePg í•¨ìˆ˜ ////////

  /*************************************** 
    ğŸ§Ší•¨ìˆ˜ëª… : initCSS
    ê¸°ëŠ¥ : ë“±ì¥í•  ìš”ì†Œë“¤ì˜ ì´ˆê¸°ê°’ ì…‹íŒ…
  ***************************************/
  // 1. ëŒ€ìƒ: .minfo
  const minfo = document.querySelectorAll(".minfo");
  console.log(minfo);
  // 2. ì´ë²¤íŠ¸ì„¤ì •
  minfo.forEach((ele,idx)=>{initCSS(ele,idx)});
  // 3. í•¨ìˆ˜ë§Œë“¤ê¸°
  function initCSS(ele,seq){ // ele-ìš”ì†Œ, seq-ìˆœë²ˆ ğŸ“¢í•´ë‹¹ë˜ëŠ” ì• ë“¤ë§ˆë‹¤ ìˆœë²ˆì´ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì—
    // 1. í•¨ìˆ˜í˜¸ì¶œí™•ì¸
    console.log("ì´ˆê¸°í™”!",seq);

    // 2. í•´ë‹¹ìš”ì†Œ ìŠ¤íƒ€ì¼ì†ì„± ì„ íƒ
    let sty = ele.style;

    // 3. ê° ìš”ì†Œë³„ ì´ˆê¸°í™”í•˜ê¸°

    // íŠ¸ëœì§€ì…˜ ê³µí†µì´ˆê¸°í™”
    sty.transition = "none";

    // í˜ì´ì§€ë³„ ì´ˆê¸°í™”
    if(seq===0){ // 1ë²ˆí˜ì´ì§€
        // ì˜¤ë¥¸ìª½ì— ë‚˜ê°€ìˆìŒ!
        sty.left = "150%";
    } ///// if /////////////
    else if(seq===1){ // 2ë²ˆí˜ì´ì§€
        // íˆ¬ëª…í•˜ê²Œ!
        sty.opacity = 0;
    } ///// else if //////////
    else if(seq===2){ // 3ë²ˆí˜ì´ì§€
        // ìœ„ë¡œ ì˜¬ë¼ê°€ìˆìŒ!
        sty.top = "-20%";
    } ///// else if //////////
    else if(seq===3){ // 4ë²ˆí˜ì´ì§€
        // ì¤‘ì•™ ìŠ¤ì¼€ì¼0
        sty.transform = "translate(-50%, -50%) scale(0)";
    } ///// else if //////////
    else if(seq===4){ // 5ë²ˆí˜ì´ì§€
        // ì¤‘ì•™ ìŠ¤ì¼€ì¼0
        sty.top = "-20%";
        sty.transform = "scale(0)";
    } ///// else if //////////

  } /////////// initCSS í•¨ìˆ˜ //////


  /*************************************** 
    ğŸ¥í•¨ìˆ˜ëª… : pageAction
    ê¸°ëŠ¥ : í˜ì´ì§€ë³„ ì•¡ì…˜ì£¼ê¸°
  ***************************************/
 function pageAction(seq){ // seq-ë³€ê²½ìˆœë²ˆ
    // 1. í˜¸ì¶œí™•ì¸
    console.log("ì•¡ìˆ€~!!!",seq);

    // 2. ë³€ê²½ëŒ€ìƒ ìŠ¤íƒ€ì¼ ì†ì„±ì„ íƒ
    let sty = minfo[seq].style;

    // 3. ì „ì²´ì´ˆê¸°í™”!
    minfo.forEach((ele,idx)=>{initCSS(ele,idx)});

    // 4. í•´ë‹¹ í˜ì´ì§€ ì•¡ì…˜ì£¼ê¸°
    if(seq===0){ // 1ë²ˆí˜ì´ì§€              

    } ///// if //////
    if(seq===0){ // 1ë²ˆí˜ì´ì§€
        // ì¤‘ì•™ìœ¼ë¡œ ë“¤ì–´ì˜´!
        sty.left = "50%";
        // íŠ¸ëœì§€ì…˜ì£¼ê¸°
        sty.transition = "all 0.4s cubic-bezier(0.21, 0.78, 0.96, 1.39) 0s";
    } ///// if /////////////
    else if(seq===1){ // 2ë²ˆí˜ì´ì§€
        // íˆ¬ëª…ë„ ë³µì›í•˜ê¸°!
        sty.opacity = 1;
        // íŠ¸ëœì§€ì…˜ì£¼ê¸°
        sty.transition = "1.5s ease-in";
    } ///// else if //////////
    else if(seq===2){ // 3ë²ˆí˜ì´ì§€
        // ìœ„ì—ì„œ ì¤‘ì•™ìœ¼ë¡œ ì´ë™!
        sty.top = "50%";
        // íŠ¸ëœì§€ì…˜ì£¼ê¸°
        sty.transition = "all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s";
    } ///// else if //////////
    else if(seq===3){ // 4ë²ˆí˜ì´ì§€
        // ì¤‘ì•™ ìŠ¤ì¼€ì¼ ë³µì›
        sty.transform = "translate(-50%, -50%) scale(1)";
        // íŠ¸ëœì§€ì…˜ì£¼ê¸°
        sty.transition = "2s ease-in-out";
    } ///// else if //////////
    else if(seq===4){ // 5ë²ˆí˜ì´ì§€
        // ì¤‘ì•™ ìŠ¤ì¼€ì¼0
        sty.top = "50%";
        sty.transform = "translate(-50%, -50%) scale(1.5)";
        sty.transition = "2s ease-in";
    } ///// else if //////////


 } //////////// pageAction í•¨ìˆ˜ /////

} //////////// loadFn í•¨ìˆ˜ ///////////////
