// ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ JS - list.js

// [ ì œì´ìŠ¨ íŒŒì¼ ë°ì´í„° ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë„£ê¸° ]
// 1. ë³€ìˆ˜ì— ì œì´ìŠ¨ íŒŒì¼ ë¬¸ìí™” í•˜ì—¬ ë¶ˆëŸ¬ì˜¤ê¸°
let jsn = JSON.stringify(mydata);
// console.log(jsn);

// 2. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì—¬ í• ë‹¹í•˜ê¸°
localStorage.setItem("bdata",jsn);
// console.log("ë¡œì»¬ìŠ¤:",localStorage.getItem("bdata"));

// 3. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ì— ë„£ê¸°
// 3-1. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°ì´í„° íŒŒì‹±í•˜ê¸°
let bdata = JSON.parse(localStorage.getItem("bdata"));
// console.log("ë¡œì»¬ìŠ¤íŒŒì‹±:",bdata,
// "/ê°œìˆ˜:",bdata.length);

// 3-2. ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ ìƒì„±í•˜ê¸°
let blist = "";

// í˜ì´ì§€ë²ˆí˜¸ : í˜ì´ì§€ë‹¨ìœ„ë³„ ìˆœì„œë²ˆí˜¸
let pgnum = 1;
// í˜ì´ì§€ë‹¨ìœ„ìˆ˜ : í•œ í˜ì´ì§€ë‹¹ ë ˆì½”ë“œìˆ˜
const pgblock = 9; // ğŸ˜€ëª‡ê° ì§€ ì„¤ì • / ì¤‘ê°„ì— ëª»ë°”ê¾¸ê²Œ constë¡œ

// ì‹œì‘ë²ˆí˜¸ìƒì„± : (í˜ì´ì§€ë²ˆí˜¸-1) * í˜ì´ì§€ë‹¨ìœ„ìˆ˜
// -> (pgnum-1) * pgblock
// ëë²ˆí˜¸ìƒì„± : í˜ì´ì§€ë²ˆí˜¸ * í˜ì´ì§€ë‹¨ìœ„ìˆ˜
// -> pgnum * pgblock

/*********************************************** 
    í•¨ìˆ˜ëª…: bindList
    ê¸°ëŠ¥: í˜ì´ì§€ë³„ ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ì—¬ ë°”ì¸ë”©í•¨
***********************************************/
function bindList(num){
    pgnum = num;
    // 1. ì¼ë°˜í˜• forë¬¸ìœ¼ë¡œ íŠ¹ì •ëŒ€ìƒ ë°°ì—´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    // ë°ì´í„° ìˆœì„œ: ë²ˆí˜¸,ê¸€ì œëª©,ê¸€ì“´ì´,ë“±ë¡ì¼ì,ì¡°íšŒìˆ˜
    for(let i = (pgnum-1)*pgblock; i< pgnum*pgblock; i++){
        blist += `
            <tr>
                <td>${bdata[i]["idx"]}</td>
                <td>${bdata[i]["tit"]}</td>
                <td>${bdata[i]["writer"]}</td>
                <td>${bdata[i]["date"]}</td>
                <td>${bdata[i]["cnt"]}</td>
            </tr>
        `;
    } /////////// for ë¬¸ ////////////
    
    console.log("ì½”ë“œ:",blist);

    // 2. ë¦¬ìŠ¤íŠ¸ ì½”ë“œ í…Œì´ë¸”ì— ë„£ê¸°
    $("#board tbody").html(blist);

    // 3. í˜ì´ì§• ë¸”ë¡ ë§Œë“¤ê¸°
    // ì „ì²´ í˜ì´ì§€ ë²ˆí˜¸ìˆ˜ ê³„ì‚°í•˜ê¸°
    // ì „ì²´ ë ˆì½”ë“œìˆ˜ / í˜ì´ì§€ë‹¨ìœ„ìˆ˜ (ë‚˜ë¨¸ì§€ìˆìœ¼ë©´+ 1 )
    // ì „ì²´ ë ˆì½”ë“œ ìˆ˜ : bdata.length
    let pgtotal = Math.floor(bdata.length / pgblock);
    let pgadd = bdata.length % pgblock;
    console.log("í˜ì´ì§• ì „ì²´ìˆ˜:",pgtotal);
    console.log("í˜ì´ì§• ë‚˜ë¨¸ì§€:",pgadd);

} /////////////// bindListí•¨ìˆ˜ /////////////



//////////////// ë¡œë“œ êµ¬ì—­ //////////////////
$(()=>{

    // ìµœì´ˆ ë¦¬ìŠ¤íŠ¸ ë°”ì¸ë”©í˜¸ì¶œ
    bindList(1);

}); /////////////// jQB ///////////////////